{"templateName":"fengji","remark":"","pixel_attr":{"script":"\n  {\n    /*@ 数据处理端\n    * 访问自定义属性 this.getAttr('attr_name');\n\n    * 访问图元状态值，状态由key 状态名、value 状态值构成。\n       例如 this.setState('rotate',1),来设置rotate 这个状态的值。\n\n    * 获取图元的状态值，this.getState('状态名')。\n    *\n    */\n    process:{\n\n      /*\n      数据处理方法 ，每次自定义属性中的值发生变化，都将触发此\n      */\n      data_handler:function(){\n        \n        // 正转\n        if(this.getAttr('zz').value == '1')\n        {\n          this.setState('zz'); \n        }\n        \n        // 反转\n         if(this.getAttr('fz').value == '1')\n        {\n          this.setState('fz');\n        }\n        \n        // 停止\n        if(this.getAttr('st').value == '1')\n        {\n          this.setState('st');\n        }\n      }  \n    },\n\n    /*@ 数据消费端\n      * 通用旋转方法，this.animate.rotate(animate_type),\n        当animate_type 为1时正转、2反转、0停止。\n\n      * 通用发布控制方法，this.setCtr(attr_name,value),通过该方法\n        可以下发控制到设备端，attr_name 为数据处理端的对应的attr，\n        value为对应的值\n\n      * 获取图元的状态值，this.getState('状态名')。\n\n    */\n    consume:{\n\n      /*\n       * 鼠标事件监听 ，event的值可能为 mouse:over,mouse:down,\n         mouse:up\n      */\n      Event:function(event){\n        //console.log(\"事件监听\");\n         //console.log(event);\n        //console.log(obj.state);\n        //console.log( this.getState());\n        if(event == \"mouse:down\"){\n          var state = this.getState();\n          switch(state){\n            case 'zz': // 正转\n              this.setCtr(\"fz\",1);// 下发反转的控制\n              break;\n            case 'fz':\n              this.setCtr('st',1);// 下发停止控制\n              break;\n            case 'st':\n              this.setCtr('zz',1);//下发控制的曹组\n              break;\n          }\n        }\n      },\n\n      /*\n       * 数据消费方法 ，当数据处理端(process) 调用\n        this.setState()来设置状态时，将会触发次消费方法\n      */\n      consume_data:function(state){\n        switch(state)\n        {\n          case 'zz':\n             this.animate.rotate = 1;\n             break;\n          case 'fz':\n             this.animate.rotate = 2;\n             break;\n          case 'st':\n             this.animate.rotate = 0;\n             break;\n        }\n      },\n\n    }\n  }\n  ","attr":[{"attrName":"zz","value":"device1-1","editor":"text","tagName":""},{"attrName":"fz","value":"device1-2","editor":"text","tagName":""},{"attrName":"st","value":"device1-3","editor":"text","tagName":""}]}}